# Android Build Configuration Guide

## Security Improvements

The Android build configuration has been updated to remove hardcoded paths and sensitive information. This makes the project more portable and secure.

## Setup Instructions

### 1. Configure gradle.properties

Copy the example file and configure for your environment:

```bash
cd android
cp gradle.properties.example gradle.properties
```

Edit `android/gradle.properties` and set your keystore configuration:

```properties
# For release builds - use environment variables (recommended) or set here
MYAPP_UPLOAD_STORE_FILE=your_keystore_file.keystore
MYAPP_UPLOAD_KEY_ALIAS=your_key_alias
MYAPP_UPLOAD_STORE_PASSWORD=your_store_password
MYAPP_UPLOAD_KEY_PASSWORD=your_key_password
```

**⚠️ SECURITY IMPORTANT:**
- The `gradle.properties` file is now in `.gitignore` and should NOT be committed to version control
- Use the `gradle.properties.example` file as a template for team members
- For CI/CD, use environment variables instead of committing passwords

### 2. Configure local.properties (Optional)

Copy the example file:

```bash
cd android
cp local.properties.example local.properties
```

The `local.properties` file is auto-generated by Android Studio, but you can manually set:

```properties
sdk.dir=/path/to/your/Android/sdk
```

### 3. Using Environment Variables (Recommended for CI/CD)

Instead of storing passwords in `gradle.properties`, use environment variables:

```bash
export MYAPP_UPLOAD_STORE_FILE=your_keystore_file.keystore
export MYAPP_UPLOAD_KEY_ALIAS=your_key_alias
export MYAPP_UPLOAD_STORE_PASSWORD=your_store_password
export MYAPP_UPLOAD_KEY_PASSWORD=your_key_password
```

Then build:

```bash
cd android
./gradlew assembleRelease
```

### 4. Node.js Configuration

Node.js is now auto-detected from your system PATH. The build will automatically find Node.js through:
- nvm (if installed)
- System PATH
- Default node installation

If you need to specify a custom Node.js path, you can set it in `gradle.properties`:

```properties
react.native.node.path=/custom/path/to/node
```

## Changes Made

### Removed Hardcoded Values:
1. ✅ User-specific paths (`/Users/henry/...`)
2. ✅ Node.js version paths
3. ✅ Keystore passwords
4. ✅ Java home paths

### Added:
1. ✅ Example configuration files (`.example` suffix)
2. ✅ Environment variable support for sensitive data
3. ✅ Auto-detection for Node.js paths
4. ✅ Updated `.gitignore` to exclude `gradle.properties`

## Building the App

### Debug Build:
```bash
cd android
./gradlew assembleDebug
```

### Release Build:
```bash
cd android
./gradlew assembleRelease
```

The APK will be generated in:
- Debug: `android/app/build/outputs/apk/debug/app-debug.apk`
- Release: `android/app/build/outputs/apk/release/app-release.apk`

## Troubleshooting

### "Node not found" Error
Make sure Node.js is in your PATH:
```bash
which node
node --version
```

If using nvm:
```bash
nvm use
```

### Keystore Errors
Ensure your keystore file is in the `android/app/` directory and the filename matches what you set in `gradle.properties`.

## For Team Members

When setting up this project:
1. Clone the repository
2. Copy `android/gradle.properties.example` to `android/gradle.properties`
3. Configure your local keystore settings (ask team lead for credentials)
4. Build the app

## For CI/CD Pipelines

Set these environment variables in your CI/CD configuration:
- `MYAPP_UPLOAD_STORE_FILE`
- `MYAPP_UPLOAD_KEY_ALIAS`
- `MYAPP_UPLOAD_STORE_PASSWORD`
- `MYAPP_UPLOAD_KEY_PASSWORD`

Store the actual keystore file as a secure file in your CI/CD system.
