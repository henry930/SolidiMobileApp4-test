appId: com.solidimobileapp4test
---
# Adaptive Login E2E Test Flow
- launchApp
- clearState

# Wait for app to fully load (up to 15 seconds)
- runFlow:
    when:
      visible: ".*Loading.*|.*Initializing.*"
    commands:
      - extendedWaitUntil:
          notVisible: ".*Loading.*|.*Initializing.*"
          timeout: 15000

# Take screenshot of loaded screen
- takeScreenshot: 01_app_loaded

# Wait a bit more for animations
- waitForAnimationToEnd:
    timeout: 3000

# Try to find and tap any login/sign in related button or text
- runFlow:
    when:
      visible: ".*Login.*|.*Sign.*|.*Enter.*|.*Start.*"
    commands:
      - tapOn: ".*Login.*|.*Sign.*|.*Enter.*|.*Start.*"
      - takeScreenshot: 02_after_tap_login

# Wait for login screen to appear
- extendedWaitUntil:
    visible: ".*@.*|.*password.*|.*Password.*"
    timeout: 10000
    optional: true

# Take screenshot of current state
- takeScreenshot: 03_current_screen

# Try to tap on the first input field (usually email)
- tapOn:
    index: 0
    
# Input email
- inputText: "henry930@gmail.com"
- hideKeyboard
- takeScreenshot: 04_email_entered

# Tap on second input field (usually password)  
- tapOn:
    index: 1

# Input password
- inputText: "DazzPow/930"
- hideKeyboard
- takeScreenshot: 05_password_entered

# Look for and tap login button
- tapOn:
    text: ".*Login.*|.*Sign.*|.*Submit.*|.*Continue.*"
- takeScreenshot: 06_login_tapped

# Wait for login to complete
- extendedWaitUntil:
    visible: ".*Portfolio.*|.*Wallet.*|.*Balance.*|.*Home.*|.*Dashboard.*"
    timeout: 20000

# Take final screenshot
- takeScreenshot: 07_logged_in_success
