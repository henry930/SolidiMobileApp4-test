appId: co.solidi.mobile.test
---
# Wallet Withdraw E2E Test - BTC and GBP (Complete Withdrawals)
# Actually completes withdrawals with small test amounts

# Step 1: Launch app
- launchApp
- extendedWaitUntil:
    visible: ".*"
    timeout: 45000
- takeScreenshot: 01_app_launched

# Step 2: Navigate to Wallet tab
- tapOn:
    point: "17%,96%"
- extendedWaitUntil:
    visible: ".*"
    timeout: 10000
- takeScreenshot: 02_wallet_tab

# Step 3: Wait for wallet to load
- extendedWaitUntil:
    visible: ".*"
    timeout: 20000
- takeScreenshot: 03_wallet_loaded

# ========== TEST BTC WITHDRAWAL (COMPLETE) ==========
# Step 4: Tap Withdraw button
- tapOn:
    point: "75%,22%"
- extendedWaitUntil:
    visible: ".*"
    timeout: 5000
- takeScreenshot: 04_withdraw_dialog

# Step 5: Select BTC (first option or tap BTC text)
- runFlow:
    when:
      visible: "BTC|Bitcoin"
    commands:
      - tapOn: "BTC|Bitcoin"

# Fallback: tap first currency
- runFlow:
    when:
      notVisible: "Select|Amount|Address"
    commands:
      - tapOn:
          point: "50%,35%"

- extendedWaitUntil:
    visible: ".*"
    timeout: 3000
- takeScreenshot: 05_btc_selected

# Step 6: Select address from address book
- runFlow:
    when:
      visible: "Select|Choose|Address"
    commands:
      - tapOn:
          point: "50%,50%"
      - extendedWaitUntil:
          visible: ".*"
          timeout: 2000
      - tapOn:
          point: "50%,40%"
      - takeScreenshot: 06_btc_address_selected

# Step 7: Enter BTC amount (0.0001)
- tapOn:
    point: "50%,55%"
- inputText: "0.0001"
- hideKeyboard
- hideKeyboard
- takeScreenshot: 07_btc_amount_entered

# Step 8: Review form
- extendedWaitUntil:
    visible: ".*"
    timeout: 3000
- takeScreenshot: 08_btc_form_ready

# Step 9: Tap Withdraw/Send/Confirm button (bottom right)
- tapOn:
    point: "75%,85%"
- extendedWaitUntil:
    visible: ".*"
    timeout: 5000
- takeScreenshot: 09_btc_withdraw_submitted

# Step 10: Wait for confirmation or success message
- extendedWaitUntil:
    visible: ".*"
    timeout: 10000
- takeScreenshot: 10_btc_result

# Step 11: Dismiss any success dialog
- runFlow:
    when:
      visible: "OK|Close|Done"
    commands:
      - tapOn: "OK|Close|Done"

- extendedWaitUntil:
    visible: ".*"
    timeout: 2000
- takeScreenshot: 11_btc_complete

# ========== TEST GBP WITHDRAWAL (COMPLETE) ==========
# Step 12: Tap Withdraw again
- tapOn:
    point: "75%,22%"
- extendedWaitUntil:
    visible: ".*"
    timeout: 5000
- takeScreenshot: 12_withdraw_dialog_2

# Step 13: Select GBP
- runFlow:
    when:
      visible: "GBP|British Pound|Pound|Â£"
    commands:
      - tapOn: "GBP|British Pound|Pound|Â£"

# Fallback: scroll and tap
- runFlow:
    when:
      notVisible: "Amount|Select"
    commands:
      - scroll
      - tapOn:
          point: "50%,50%"

- extendedWaitUntil:
    visible: ".*"
    timeout: 3000
- takeScreenshot: 13_gbp_selected

# Step 14: Select bank account if needed
- runFlow:
    when:
      visible: "Select|Choose|Bank|Account"
    commands:
      - tapOn:
          point: "50%,55%"
      - extendedWaitUntil:
          visible: ".*"
          timeout: 2000
      - takeScreenshot: 14_gbp_bank_selected

# Step 15: Enter GBP amount (10)
- tapOn:
    point: "50%,40%"
- inputText: "10"
- hideKeyboard
- hideKeyboard
- takeScreenshot: 15_gbp_amount_entered

# Step 16: Review GBP form
- extendedWaitUntil:
    visible: ".*"
    timeout: 3000
- scroll
- takeScreenshot: 16_gbp_form_ready

# Step 17: Tap Withdraw button (bottom right)
- tapOn:
    point: "75%,85%"
- extendedWaitUntil:
    visible: ".*"
    timeout: 5000
- takeScreenshot: 17_gbp_withdraw_submitted

# Step 18: Wait for confirmation
- extendedWaitUntil:
    visible: ".*"
    timeout: 10000
- takeScreenshot: 18_gbp_result

# Step 19: Dismiss success dialog
- runFlow:
    when:
      visible: "OK|Close|Done"
    commands:
      - tapOn: "OK|Close|Done"

- extendedWaitUntil:
    visible: ".*"
    timeout: 2000
- takeScreenshot: 19_gbp_complete

# Step 20: Final screenshot
- takeScreenshot: 20_test_complete

# Test completed!
# âœ… BTC withdrawal submitted with 0.0001 BTC
# âœ… GBP withdrawal submitted with 10 GBP
# ðŸ“¸ All screenshots captured
