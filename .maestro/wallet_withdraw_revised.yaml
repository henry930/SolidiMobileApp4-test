appId: co.solidi.mobile.test
---
# Wallet Withdraw Test - Multiple Keyboard Dismissal Methods
# Tries: hideKeyboard, return key, and swipe down

- launchApp
- extendedWaitUntil:
    visible: ".*"
    timeout: 45000

# 1. Navigate to Wallet
- tapOn:
    point: "60%,90%"

- runFlow:
    commands:
        - tapOn:
            point: "50%,50%"
- extendedWaitUntil:
    visible: "non_existent_element"
    timeout: 3000
    optional: true

- runFlow:
    when:
        notVisible: ".*Withdraw.*"
    commands:
        - tapOn:
            point: "60%,88%"
        - extendedWaitUntil:
            visible: "non_existent_element"
            timeout: 3000
            optional: true

- runFlow:
    when:
        notVisible: ".*Withdraw.*"
    commands:
        - tapOn: ".*Wallet.*"
        - extendedWaitUntil:
            visible: "non_existent_element"
            timeout: 3000
            optional: true

# 2. Tap Withdraw
- runFlow:
    when:
        visible: ".*Withdraw.*"
    commands:
        - tapOn: ".*Withdraw.*"

- runFlow:
    when:
        notVisible: ".*Withdraw.*"
    commands:
        - tapOn:
            point: "75%,25%"

- extendedWaitUntil:
    visible: ".*"
    timeout: 10000

# 3. Smart Asset Selection
- runFlow:
    when:
        notVisible: "BTC (Bitcoin)"
    commands:
        - tapOn: ".*Asset.*|.*Currency.*" 
        - extendedWaitUntil:
            visible: "BTC (Bitcoin)"
            timeout: 5000
        - tapOn: "BTC (Bitcoin)"

- runFlow:
    when:
        visible: "BTC (Bitcoin)"
    commands:
        - tapOn: "BTC (Bitcoin)"

# 4. Input Amount (0.001)
- tapOn:
    id: "text-input-outline"
- eraseText
- inputText: "0.001"

# 5. Try multiple keyboard dismissal methods
# Method 1: hideKeyboard
- hideKeyboard

# Method 2: Press return/done key on keyboard (bottom right)
- tapOn:
    point: "90%,85%"

# Method 3: Swipe down to dismiss keyboard
- swipe:
    start: 50%, 60%
    end: 50%, 40%

# Wait for keyboard to dismiss
- extendedWaitUntil:
    visible: "non_existent_element"
    timeout: 2000
    optional: true

# 6. Select Address
- tapOn: "Select a saved address.*"
- extendedWaitUntil:
    visible: ".*"
    timeout: 3000

# Tap center to select first address
- tapOn:
    point: "50%,50%"

# Wait for selection
- extendedWaitUntil:
    visible: "non_existent_element"
    timeout: 2000
    optional: true

# 7. Submit Withdrawal
- runFlow:
    when:
        visible: "Withdraw|Send|Confirm"
    commands:
        - tapOn: "Withdraw|Send|Confirm"

- runFlow:
    when:
        notVisible: "Withdraw|Send|Confirm"
    commands:
        - tapOn:
            point: "75%,85%"

- extendedWaitUntil:
    visible: "Success|Done|OK"
    timeout: 10000
    optional: true

- takeScreenshot: withdraw_complete
